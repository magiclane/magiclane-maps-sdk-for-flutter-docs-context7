---
description: Documentation for Images
title: Images
---

# Images

The images are represented in an abstract form which is not directly drawable on the UI. The responsible classes are `Img`, `AbstractGeometryImg`, `LaneImg`, `SignpostImg`, and `RoadInfoImg`.

These classes provide the following methods and getters:

- `uid`: Gets the unique ID of the image. If two images are the same, then they have the same UID. This allows the user to optimize UI redraws and trigger an update only when the image changes.

- `isValid`: Verifies if the image data is valid. If the image is not valid, then `getRenderableImageBytes` and `getRenderableImage` will return `null`.

- `getRenderableImageBytes`: Returns a `Uint8List` which can be displayed on the UI using the `Image.memory` constructor. It returns `null` if the image is invalid.

- `getRenderableImage`: Returns a `RenderableImg` which contains the image size and the `Uint8List` that can be drawn on the UI. It returns `null` if the image is invalid.

## Plain images 

The `Img` class corresponds to plain (usually non-vector) images. These images have a recommended size and aspect ratio but can be resized to any dimension in order to be drawn (with possible loss of quality).

The user can instantiate an `Img` class:

- Using the constructor which takes the `Uint8List` image data and format.

- Using the async `fromAsset` factory method which takes the asset key (and optionally a custom bundle).

## Special images

The `AbstractGeometryImg`, `LaneImg`, `SignpostImg`, and `RoadInfoImg` classes correspond to vector images generated by the SDK based on internal data. They provide customizable options for rendering. They do not have a default size or aspect ratio.

The `LaneImg`, `SignpostImg`, and `RoadInfoImg` classes might be best displayed at a particular aspect ratio depending on the image content. To render the images at a suitable size chosen by the SDK based on the user-provided size, set the `allowResize` parameter of the `getRenderableImage`/`getRenderableImageBytes` methods to `true`.
If the `allowResize` parameter is set to `false`, then rendering will always be done at the size specified by the user (the resulting image might be distorted).

Use the `getRenderableImage` method instead of `getRenderableImageBytes` when setting the `allowResize` parameter to `true`. This way, the size of the rendered image is also provided within the resulting `RenderableImg` class.

The particularities of each image type are presented in the table below:

<table>
  <thead>
    <tr>
      <th>Class</th>
      <th>Size and aspect ratio</th>
      <th>Customizable render options</th>
      <th>The size of the renderable image returned by the `getRenderableImage`/`getRenderableImageBytes` methods</th>
      <th>Instantiable by the user</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`Img`</td>
      <td>Usually fixed and retrievable via the `size` and `aspectRatio` getters.</td>
      <td>Not available</td>
      <td>Will always render at the size specified by the user if provided, or the recommended size for the particular image otherwise.</td>
      <td>Yes, via the provided constructor and the `fromAsset` static method. It can be also provided by the SDK.</td>
    </tr>
    <tr>
      <td>`AbstractGeometryImg`</td>
      <td>Generated by the SDK. Size and aspect ratio not retrievable.</td>
      <td>Yes, via `AbstractGeometryImageRenderSettings`</td>
      <td>Will always render at the size specified by the user if provided, or the SDK default image size otherwise.</td>
      <td>No. Can only be provided by the SDK.</td>
    </tr>
    <tr>
      <td>`LaneImg`</td>
      <td>Generated by the SDK. Size and aspect ratio not retrievable.</td>
      <td>Yes, via `LaneImageRenderSettings`</td>
      <td>Will render at the size specified by the user if the `allowResize` parameter is false. If `allowResize` is true, the SDK will render at an aspect ratio suitable for the particular image based on the size provided by the user.</td>
      <td>No. Can only be provided by the SDK.</td>
    </tr>
    <tr>
      <td>`SignpostImg`</td>
      <td>Generated by the SDK. Size and aspect ratio not retrievable.</td>
      <td>Yes, via `SignpostImageRenderSettings`</td>
      <td>Will render at the size specified by the user if the `allowResize` parameter is false. If `allowResize` is true, the SDK will render at an aspect ratio suitable for the particular image based on the size provided by the user.</td>
      <td>No. Can only be provided by the SDK.</td>
    </tr>
    <tr>
      <td>`RoadInfoImg`</td>
      <td>Generated by the SDK. Size and aspect ratio not retrievable.</td>
      <td>Background color customizable via `Color`</td>
      <td>Will render at the size specified by the user if the `allowResize` parameter is false. If `allowResize` is true, the SDK will render at an aspect ratio suitable for the particular image based on the size provided by the user.</td>
      <td>No. Can only be provided by the SDK.</td>
    </tr>
  </tbody>
</table>

For debugging purposes, the images in `Uint8List` format can be encoded as Base64 strings using ``base64Encode`` and viewed on a Base64 [image decoding website](https://base64.guru/converter/decode/image). This approach allows for easy inspection of image data during development.

## Approaches

The different approaches regarding getting the images in a `Uint8list` form from the SDK are the following, ilustrated for the lane image contained within `NavigationInstruction`. The general principles are the same for all types of images.

### Approach 1
```dart
Uint8List? imageData = instruction.getLaneImage(
    size: const Size(200, 100),
    format: ImageFileFormat.png,
);
```

This approach is simple and straightforward, with minimal boilerplate code. However, it comes with a few limitations:

- Allowing the engine to provide the image using a suitable size/aspect ratio is not available (for now). All images will be returned at the size explicitly requested by the user.

- There is no way to retrieve the recommended image size based on the content.

- The image UID is not accessible to the user.

The `getLaneImage` method returns null if the image is invalid.

### Approach 2
```dart
LaneImg laneImage = instruction.laneImg;
Uint8List? imageData = newImage!.getRenderableImageBytes(size: const Size(200, 100), format: ImageFileFormat.png, allowResize : true);

// Get more data about the lane image
int uid = laneImage.uid;
```

This approach allows the user to configure the `allowResize` parameter but does **not** provide metadata about the provided `Uint8List` image:

- When `allowResize` is set to true, the returned `Uint8List` image may be resized to a more suitable size, which could differ from the requested dimensions.

However, the actual size of the returned image is not exposed to the user.

- When `allowResize` is set to false, the image will be returned at the exact size requested, though it may have an improper aspect ratio.

The user is able to efficiently use the image UID in order to optimize redraws. 

The `getRenderableImageBytes` method returns null if the image is invalid.

### Approach 3
```dart
LaneImg laneImage = instruction.laneImg;
RenderableImg? renderableImage = newImage.getRenderableImage(size: const Size(200, 100), format: ImageFileFormat.png, allowResize : true);
Uint8List? imageData = renderableImage?.bytes;

// Get more data about the lane image
int uid = laneImage.uid;

// Get the actual size of the image
int? width = renderableImage?.width;
int? height = renderableImage?.height;
```

This approach provides greater flexibility by allowing the user to configure the `allowResize` parameter and allows the user to get metadata about the provided `Uint8List` image:

- When `allowResize` is set to true, the returned `Uint8List` image may be resized to a more suitable size, which could differ from the one originally requested.

- The actual dimensions of the returned image can be accessed via the getters in the `RenderableImg` object.

- When `allowResize` is set to false, the image will be returned at the exact size requested, though it may have an unsuitable aspect ratio.

The user can leverage the image UID to optimize redraw operations efficiently.

The `getRenderableImage` method returns null if the image is invalid.
