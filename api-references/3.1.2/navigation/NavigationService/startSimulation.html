<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the startSimulation method from the NavigationService class, for the Dart programming language.">
  <title>startSimulation method - NavigationService class - navigation library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">magiclane_maps_flutter</a></li>
    <li><a href="../../navigation/">navigation.dart</a></li>
    <li><a href="../../navigation/NavigationService-class.html">NavigationService</a></li>
    <li class="self-crumb">startSimulation static method</li>
  </ol>
  <div class="self-name">startSimulation</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="navigation&#47;NavigationService-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">startSimulation</span> static method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="../../core/TaskHandler-class.html">TaskHandler</a>?</span>
<span class="name ">startSimulation</span>(<wbr><ol class="parameter-list"> <li><span class="parameter" id="startSimulation-param-route"><span class="type-annotation"><a href="../../core/Route-class.html">Route</a></span> <span class="parameter-name">route</span>, {</span></li>
<li><span class="parameter" id="startSimulation-param-onNavigationInstruction"><span class="type-annotation">void</span> <span class="parameter-name">onNavigationInstruction</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-instruction"><span class="type-annotation"><a href="../../navigation/NavigationInstruction-class.html">NavigationInstruction</a></span> <span class="parameter-name">instruction</span>, </span></li>
<li><span class="parameter" id="param-events"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Set-class.html">Set</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../navigation/NavigationInstructionUpdateEvents.html">NavigationInstructionUpdateEvents</a></span>&gt;</span></span> <span class="parameter-name">events</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onNavigationStarted"><span class="type-annotation">void</span> <span class="parameter-name">onNavigationStarted</span>()?, </span></li>
<li><span class="parameter" id="startSimulation-param-onTextToSpeechInstruction"><span class="type-annotation">void</span> <span class="parameter-name">onTextToSpeechInstruction</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-textInstruction"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">textInstruction</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onWaypointReached"><span class="type-annotation">void</span> <span class="parameter-name">onWaypointReached</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-landmark"><span class="type-annotation"><a href="../../core/Landmark-class.html">Landmark</a></span> <span class="parameter-name">landmark</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onDestinationReached"><span class="type-annotation">void</span> <span class="parameter-name">onDestinationReached</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-landmark"><span class="type-annotation"><a href="../../core/Landmark-class.html">Landmark</a></span> <span class="parameter-name">landmark</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onRouteUpdated"><span class="type-annotation">void</span> <span class="parameter-name">onRouteUpdated</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-route"><span class="type-annotation"><a href="../../core/Route-class.html">Route</a></span> <span class="parameter-name">route</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onBetterRouteDetected"><span class="type-annotation">void</span> <span class="parameter-name">onBetterRouteDetected</span>(<ol class="parameter-list"> <li><span class="parameter" id="param-route"><span class="type-annotation"><a href="../../core/Route-class.html">Route</a></span> <span class="parameter-name">route</span>, </span></li>
<li><span class="parameter" id="param-travelTime"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">travelTime</span>, </span></li>
<li><span class="parameter" id="param-delay"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">delay</span>, </span></li>
<li><span class="parameter" id="param-timeGain"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a></span> <span class="parameter-name">timeGain</span>, </span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onBetterRouteRejected"><span class="type-annotation">void</span> <span class="parameter-name">onBetterRouteRejected</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-reason"><span class="type-annotation"><a href="../../core/GemError.html">GemError</a></span> <span class="parameter-name">reason</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onBetterRouteInvalidated"><span class="type-annotation">void</span> <span class="parameter-name">onBetterRouteInvalidated</span>()?, </span></li>
<li><span class="parameter" id="startSimulation-param-onSkipNextIntermediateDestinationDetected"><span class="type-annotation">void</span> <span class="parameter-name">onSkipNextIntermediateDestinationDetected</span>()?, </span></li>
<li><span class="parameter" id="startSimulation-param-onTurnAround"><span class="type-annotation">void</span> <span class="parameter-name">onTurnAround</span>()?, </span></li>
<li><span class="parameter" id="startSimulation-param-onError"><span class="type-annotation">void</span> <span class="parameter-name">onError</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-error"><span class="type-annotation"><a href="../../core/GemError.html">GemError</a></span> <span class="parameter-name">error</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onNotifyStatusChange"><span class="type-annotation">void</span> <span class="parameter-name">onNotifyStatusChange</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-status"><span class="type-annotation"><a href="../../navigation/NavigationStatus.html">NavigationStatus</a></span> <span class="parameter-name">status</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-onRouteCalculationStarted"><span class="type-annotation">void</span> <span class="parameter-name">onRouteCalculationStarted</span>()?, </span></li>
<li><span class="parameter" id="startSimulation-param-onRouteCalculationCompleted"><span class="type-annotation">void</span> <span class="parameter-name">onRouteCalculationCompleted</span>(<ol class="parameter-list single-line"> <li><span class="parameter" id="param-error"><span class="type-annotation"><a href="../../core/GemError.html">GemError</a></span> <span class="parameter-name">error</span></span></li>
</ol>)?, </span></li>
<li><span class="parameter" id="startSimulation-param-speedMultiplier"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/double-class.html">double</a></span> <span class="parameter-name">speedMultiplier</span> = <span class="default-value">1.0</span>, </span></li>
</ol>})

      

    </section>
    
<section class="desc markdown">
  <p>Starts a new simulation session.</p>
<p><strong>Parameters</strong></p>
<ul>
<li>
<p><strong>IN</strong> <em>onNavigationInstruction</em> Callback called when the navigation instruction is updated. This callback also sends turn update events.</p>
<ul>
<li><strong>instruction</strong> <a href="../../navigation/NavigationInstruction-class.html">NavigationInstruction</a> The updated navigation instruction</li>
<li><strong>events</strong> <a href="https://api.flutter.dev/flutter/dart-core/Set-class.html">Set&lt;NavigationInstructionUpdateEvents&gt;</a> The events that triggered the update</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onTextToSpeechInstruction</em> Callback called when a sound needs to be played.</p>
<ul>
<li><strong>textInstruction</strong> <a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a> The instruction text to be spoken.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onWaypointReached</em> Callback called when a waypoint on the route has been reached. This callback is not called when the destination of the route has been reached. That is notified through <code>onDestinationReached</code> notification.</p>
<ul>
<li><strong>landmark</strong> <a href="../../core/Landmark-class.html">Landmark</a> The landmark that was reached.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onDestinationReached</em> Callback called when the destination has been reached. This is the moment when the navigation request finished with success.</p>
<ul>
<li><strong>landmark</strong> <a href="../../core/Landmark-class.html">Landmark</a> The landmark that was reached.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onRouteUpdated</em> Callback called when route was updated.</p>
<ul>
<li><strong>route</strong> <a href="../../core/Route-class.html">Route</a> The updated route.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onBetterRouteDetected</em> Better route was detected.
The previous better route ( if it exists ) must be considered automatically invalidated. This callback is called when a route is calculated with 'avoid traffic' flag set to 'true' (<a href="../../routing/RoutePreferences/avoidTraffic.html">RoutePreferences.avoidTraffic</a>) and the engine detects a better route.</p>
<ul>
<li><strong>route</strong> <a href="../../core/Route-class.html">Route</a> The newly detected better route.</li>
<li><strong>travelTime</strong> <a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a> The travel time of the new route in seconds.</li>
<li><strong>delay</strong> <a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a> Better route delay in seconds</li>
<li><strong>timeGain</strong> <a href="https://api.flutter.dev/flutter/dart-core/int-class.html">int</a> Time gain from the existing route in seconds. <code>-1</code> means the original route has roadblocks and time gain cannot be calculated.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onBetterRouteRejected</em> Better route rejected with given error code ( debug purposes )</p>
<ul>
<li><strong>errorCode</strong> <a href="../../core/GemError.html">GemError</a> Rejection reason</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onBetterRouteInvalidated</em> Previously detected better route became invalid. This callback is called when current position is no longer on the previously calculated better route</p>
</li>
<li>
<p><strong>IN</strong> <em>onError</em> Callback called when an error occurs.</p>
<ul>
<li><strong>error</strong> <a href="../../core/GemError.html">GemError</a> The error code.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onNotifyStatusChange</em> Callback to notify UI if the navigation status has changed.</p>
<ul>
<li><strong>status</strong> <a href="../../navigation/NavigationStatus.html">NavigationStatus</a> The navigation status.</li>
</ul>
</li>
<li>
<p><strong>IN</strong> <em>onSkipNextIntermediateDestinationDetected</em> Next intermediate destination skip intention detected. This notification is sent the navigation engine detects user intention to skip the next intermediate destination</p>
</li>
<li>
<p><strong>IN</strong> <em>onTurnAround</em> Turn around callback. This callback is called after a navigation route recalculation, if the new route is heading on the opposite user travel direction</p>
</li>
<li>
<p><strong>IN</strong> <em>onNavigationStarted</em> Navigation started callback. This callback is called when first valid position for navigation arrives</p>
</li>
<li>
<p><strong>IN</strong> <em>speedMultiplier</em> Speed multiplier. The route simulation speed multiplier. Accepted values are in the interval <a href="../../navigation/NavigationService/simulationMinSpeedMultiplier.html">simulationMinSpeedMultiplier</a> - <a href="../../navigation/NavigationService/simulationMaxSpeedMultiplier.html">simulationMaxSpeedMultiplier</a>. If set to 1.f the simulation speed is the speed limit of the traveled links</p>
</li>
<li>
<p><strong>IN</strong> <em>onRouteCalculationStarted</em> Route calculation started callback. This callback is called when a route calculation is started.</p>
</li>
<li>
<p><strong>IN</strong> <em>onRouteCalculationCompleted</em> Route calculation completed callback. This callback is called when a route calculation is completed. If the route calculation failed, the error code is provided. See the errors returned by <a href="../../routing/RoutingService/calculateRoute.html">RoutingService.calculateRoute</a> for possible error codes.</p>
</li>
</ul>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">static TaskHandler? startSimulation(
  final Route route, {
  final void Function(
    NavigationInstruction instruction,
    Set&lt;NavigationInstructionUpdateEvents&gt; events,
  )?
  onNavigationInstruction,
  final void Function()? onNavigationStarted,
  final void Function(String textInstruction)? onTextToSpeechInstruction,
  final void Function(Landmark landmark)? onWaypointReached,
  final void Function(Landmark landmark)? onDestinationReached,
  final void Function(Route route)? onRouteUpdated,
  final void Function(Route route, int travelTime, int delay, int timeGain)?
  onBetterRouteDetected,
  final void Function(GemError reason)? onBetterRouteRejected,
  final void Function()? onBetterRouteInvalidated,
  final void Function()? onSkipNextIntermediateDestinationDetected,
  final void Function()? onTurnAround,
  final void Function(GemError error)? onError,
  final void Function(NavigationStatus status)? onNotifyStatusChange,
  final void Function()? onRouteCalculationStarted,
  final void Function(GemError error)? onRouteCalculationCompleted,
  final double speedMultiplier = 1.0,
}) {
  final OperationResult result = staticMethod(
    &#39;NavigationService&#39;,
    &#39;startNavigation&#39;,
    args: &lt;String, dynamic&gt;{
      &#39;route&#39;: route.pointerId,
      &#39;simulation&#39;: true,
      &#39;speedMultiplier&#39;: speedMultiplier,
    },
  );

  final int gemApiError = result[&#39;gemApiError&#39;];

  if (GemErrorExtension.isErrorCode(gemApiError)) {
    final GemError errorCode = GemErrorExtension.fromCode(gemApiError);
    onError?.call(errorCode);
    return null;
  }

  final int listenerId = result[&#39;result&#39;];

  final NavigationListener listener = NavigationListener.init(listenerId);
  listener.registerAll(
    onNavigationStarted: onNavigationStarted,
    onNavigationInstructionUpdated:
        (
          final NavigationInstruction instruction,
          final Set&lt;NavigationInstructionUpdateEvents&gt; events,
        ) {
          onNavigationInstruction?.call(instruction, events);
        },
    onWaypointReached: onWaypointReached,
    onDestinationReached: (final Landmark destination) {
      onDestinationReached?.call(destination);
    },
    onNavigationError: (final GemError error) {
      GemKitPlatform.instance.unregisterEventHandler(listener.id);
      onError?.call(error);
    },
    onRouteUpdated: onRouteUpdated,
    onNavigationSound: onTextToSpeechInstruction,
    onNotifyStatusChange: onNotifyStatusChange,
    onBetterRouteDetected: onBetterRouteDetected,
    onBetterRouteRejected: onBetterRouteRejected,
    onBetterRouteInvalidated: onBetterRouteInvalidated,
    onSkipNextIntermediateDestinationDetected:
        onSkipNextIntermediateDestinationDetected,
    onTurnAround: onTurnAround,
    onRouteCalculationStarted: onRouteCalculationStarted,
    onRouteCalculationCompleted: onRouteCalculationCompleted,
  );

  GemKitPlatform.instance.registerEventHandler(listener.id, listener);
  return TaskHandlerImpl(listener.id);
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">magiclane_maps_flutter</a></li>
    <li><a href="../../navigation/">navigation</a></li>
    <li><a href="../../navigation/NavigationService-class.html">NavigationService</a></li>
    <li class="self-crumb">startSimulation static method</li>
</ol>

    <h5>NavigationService class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    magiclane_maps_flutter
      3.1.2
  </span>
  <span> | Copyright (C) 1995-2025 Magic Lane International B.V.</span>

</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

